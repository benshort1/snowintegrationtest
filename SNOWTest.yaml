---
platform: ODPv2
phase: Preview
environment: Nonp
tenant: GMAM

cloudtrail:
  output_region: ap-southeast-2

vpc:
  cidr_block: 10.0.32.0/20


subnet:
  availability_zones: ['a', 'b']
  dmz_name: Dmz

  nat:
    ami: "ami-e3217a80" #amazon/amzn-ami-vpc-nat-hvm-2015.09.1.x86_64-ebs
    instance_type: t2.small
    key_name: cba-odp-nonp-gmam-platmgmt

  vpn:
    ami: "ami-97d58af4" #amazon/amzn-ami-hvm-2015.09.1.x86_64-ebs
    instance_type: t2.small
    key_name: cba-odp-nonp-gmam-platmgmt
    client_cidr_block: 172.16.2.0/24
    access_cidr_blocks:
      - 140.168.78.24/32  # MyGuestWifi
      - 140.168.87.24/32  # MyGuestWifi

  logical_subnets:
    - name: Dmz
      cidr_block: [10.0.32.0/24, 10.0.40.0/24]
      routing: internet

    - name: ControlledExternal
      cidr_block: [10.0.33.0/24, 10.0.41.0/24]
      routing: nat

    - name: ControlledInternal
      cidr_block: [10.0.34.0/24, 10.0.42.0/24]
      routing: nat

    - name: Restricted
      cidr_block: [10.0.35.0/24, 10.0.43.0/24]
      routing: nat

    - name: Secured
      cidr_block: [10.0.36.0/24, 10.0.44.0/24]
      routing: nat

    - name: Management
      cidr_block: [10.0.37.0/24, 10.0.45.0/24]
      routing: nat

single_ec2_public_elb:
  elb:
    access_cidr_blocks:
      - 140.168.78.24/32  # MyGuestWifi
      - 140.168.87.24/32  # MyGuestWifi
      - 140.168.79.1/32   # User Proxy Burwood
      - 140.168.135.1/32  # User Proxy Norwest
    health_check_target: "HTTP:80/"

  ec2:
    instance_type: c4.xlarge
    ami: "ami-97d58af4"
    key_name: cba-odp-nonp-gmam-user
    # user_data: cba_odpv2_preview_nonp_gmam_ec2_userdata.sh.erb
    ebs:
      - device_name: "/dev/xvdf"
        volume_size: "50" # in GB